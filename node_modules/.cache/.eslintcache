[{"C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\index.js":"1","C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\reportWebVitals.js":"2","C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\App.js":"3","C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\components\\StartComponent.jsx":"4","C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\components\\TeacherComponent.jsx":"5"},{"size":513,"mtime":1690511858291,"results":"6","hashOfConfig":"7"},{"size":362,"mtime":1690510695101,"results":"8","hashOfConfig":"7"},{"size":744,"mtime":1690745679513,"results":"9","hashOfConfig":"7"},{"size":1744,"mtime":1690745679534,"results":"10","hashOfConfig":"7"},{"size":3442,"mtime":1690852041356,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","suppressedMessages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"baa067",{"filePath":"15","messages":"16","suppressedMessages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"18","messages":"19","suppressedMessages":"20","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","suppressedMessages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","suppressedMessages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27"},"C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\index.js",[],[],"C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\reportWebVitals.js",[],[],"C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\App.js",[],[],"C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\components\\StartComponent.jsx",[],[],"C:\\Users\\Charly\\OneDrive\\Documentos\\HACKATHONES\\AIlabs\\AI-minds\\react-front\\src\\components\\TeacherComponent.jsx",["28"],[],"import React, { useState, useEffect, useRef } from \"react\";\r\nimport teacher from '../assets/teacher.png';\r\nimport '../index.css';\r\nimport MicRecorder from 'mic-recorder-to-mp3';\r\n\r\nexport default function TeacherComponent({ userData }) {\r\n  const [responseText, setResponseText] = React.useState('');\r\n  const recorder = useRef(null); //Recorder\r\n  const audioPlayer = useRef(null); //Ref for HTML Audio tag\r\n  const [transcriptionText, setTranscriptionText] = useState(\"\");\r\n  const [blobURL, setBlobUrl] = useState(null);\r\n  const [isRecording, setIsRecording] = useState(null);\r\n  const [play, setPlay] = useState(false);\r\n\r\n  useEffect(() => {\r\n    //Declares the recorder object and stores it in ref\r\n    recorder.current = new MicRecorder({ bitRate: 128 });\r\n    setTranscriptionText('');\r\n  }, []);\r\n  const startRecording = () => {\r\n    //start() returns a promise incase if audio is not blocked by browser\r\n    recorder.current.start().then(() => {\r\n      setIsRecording(true);\r\n    });\r\n  };\r\n  const stopRecording = () => {\r\n    recorder.current\r\n      .stop()\r\n      .getMp3()\r\n      .then(([buffer, blob]) => {\r\n        const newBlobUrl = URL.createObjectURL(blob); //generates url from blob\r\n        setBlobUrl(newBlobUrl); //refreshes the page\r\n        setIsRecording(false);\r\n        sendAudioToServer(blob);\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  const sendAudioToServer = async (blob) => {\r\n    const audioFile = new File([blob], \"audio_file\",{type: \"audio/mp3\"});\r\n    const formData = new FormData();\r\n    formData.append('audio', audioFile);\r\n    formData.append('user_name', userData.name);\r\n    formData.append('native_language', userData.nativeLanguage);\r\n    formData.append('target_language', userData.learningLanguage);\r\n    console.log(blob);\r\n    const response = await fetch('https://tu-backend-en-azure.azurewebsites.net/start_conversation', {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n\r\n    const data = await response.json();\r\n      console.log(data);\r\n      setResponseText(data.text_response);\r\n      const audio = new Audio(`data:audio/wav;base64,${data.audio_response}`);\r\n      const transcriptionWithUserName = `${userData.name}: ${data.transcript}`;\r\n      setTranscriptionText(transcriptionWithUserName);\r\n      audio.play();\r\n    };\r\n    return (\r\n      <div className=\"\">\r\n        <img src={teacher} alt=\"Personaje\" className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-2/3 w-1/2 md:w-1/3\" />\r\n        <div className=\"absolute bottom-0 left-0 w-full h-2/4 bg-black bg-opacity-50 p-4 rounded-t\">\r\n          <h1 className=\"text-6xl font-bold mb-4 text-white text-center\">Hello I'am your teacher</h1>\r\n          <textarea className=\"w-full p-2 mb-4 h-40\" readOnly value={responseText} />\r\n          <div className=\"flex space-x-4\">\r\n          <textarea type=\"text\" className=\"w-full p-2\" placeholder=\"Introduce tu texto aquÃ­\" value={transcriptionText}/>\r\n          <button onClick={startRecording} disabled={isRecording}>\r\n            Record\r\n          </button>\r\n          <button onClick={stopRecording} disabled={!isRecording}>\r\n            Stop\r\n          </button>\r\n          <audio\r\n            ref={audioPlayer}\r\n            src={blobURL}\r\n            controls=\"controls\"\r\n            onEnded={() => setPlay(false)} //event handler when audio has stopped playing\r\n          />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n",{"ruleId":"29","severity":1,"message":"30","line":13,"column":10,"nodeType":"31","messageId":"32","endLine":13,"endColumn":14},"no-unused-vars","'play' is assigned a value but never used.","Identifier","unusedVar"]